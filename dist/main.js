(()=>{"use strict";var e={790:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(601),a=n.n(r),s=n(314),o=n.n(s)()(a());o.push([e.id,"/* http://meyerweb.com/eric/tools/css/reset/ \n   v2.0 | 20110126\n   License: none (public domain)\n*/\n\nhtml,\nbody,\ndiv,\nspan,\napplet,\nobject,\niframe,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\np,\nblockquote,\npre,\na,\nabbr,\nacronym,\naddress,\nbig,\ncite,\ncode,\ndel,\ndfn,\nem,\nimg,\nins,\nkbd,\nq,\ns,\nsamp,\nsmall,\nstrike,\nstrong,\nsub,\nsup,\ntt,\nvar,\nb,\nu,\ni,\ncenter,\ndl,\ndt,\ndd,\nol,\nul,\nli,\nfieldset,\nform,\nlabel,\nlegend,\ntable,\ncaption,\ntbody,\ntfoot,\nthead,\ntr,\nth,\ntd,\narticle,\naside,\ncanvas,\ndetails,\nembed,\nfigure,\nfigcaption,\nfooter,\nheader,\nhgroup,\nmenu,\nnav,\noutput,\nruby,\nsection,\nsummary,\ntime,\nmark,\naudio,\nvideo {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-size: 100%;\n  font: inherit;\n  vertical-align: baseline;\n}\n/* HTML5 display-role reset for older browsers */\narticle,\naside,\ndetails,\nfigcaption,\nfigure,\nfooter,\nheader,\nhgroup,\nmenu,\nnav,\nsection {\n  display: block;\n}\nbody {\n  line-height: 1;\n}\nol,\nul {\n  list-style: none;\n}\nblockquote,\nq {\n  quotes: none;\n}\nblockquote:before,\nblockquote:after,\nq:before,\nq:after {\n  content: '';\n  content: none;\n}\ntable {\n  border-collapse: collapse;\n  border-spacing: 0;\n}\n/* Added by me */\n*,\n*::before,\n*::after {\n  box-sizing: border-box;\n}\n\n* {\n  margin: 0;\n  padding: 0;\n  font: inherit;\n}\n",""]);const i=o},16:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(601),a=n.n(r),s=n(314),o=n.n(s)()(a());o.push([e.id,"body {\n  font-family: monospace;\n}\n\n#container {\n  width: 100vw;\n  height: 100vh;\n  background: linear-gradient(\n    180deg,\n    rgba(158, 241, 252, 1) 5%,\n    rgba(28, 241, 250, 1) 25%,\n    rgba(9, 41, 121, 1) 90%,\n    rgba(5, 9, 69, 1) 100%\n  );\n  display: flex;\n  flex-direction: column;\n}\n\n#game-title {\n  font-size: 3rem;\n  color: black;\n  text-align: center;\n  padding: 30px;\n}\n\n#game-container {\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n}\n\n#winner-display {\n  font-size: 1.5rem;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 20px;\n  gap: 20px;\n  visibility: hidden;\n}\n\n#winner-display button {\n  background-color: transparent;\n  padding: 5px 10px;\n  border: 2px solid black;\n  cursor: pointer;\n}\n\n#board-container {\n  display: flex;\n  justify-content: center;\n  padding: 50px;\n  gap: 50px;\n}\n\n#ships-container {\n  width: 500px;\n  height: 500px;\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n  align-items: center;\n  justify-content: center;\n}\n\n#orientation {\n  display: flex;\n  gap: 5px;\n}\n\n#orientation .ori-btn {\n  width: 100px;\n  height: 30px;\n  border: 2px solid black;\n  background-color: black;\n  color: white;\n  cursor: pointer;\n}\n\n#orientation .ori-btn.active {\n  background-color: white;\n  color: black;\n}\n\n#ships-div {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  justify-content: center;\n  align-items: center;\n  flex: 1;\n}\n\n#ships-div.vertical {\n  flex-direction: row;\n}\n\n.setup-ship {\n  display: flex;\n  border: 1px solid black;\n}\n\n.setup-ship.vertical {\n  flex-direction: column;\n}\n\n.cell {\n  background: grey;\n  width: 50px;\n  height: 50px;\n  border: 1px solid black;\n}\n\n#start-btn {\n  background-color: transparent;\n  padding: 5px 10px;\n  border: 2px solid white;\n  cursor: pointer;\n  color: white;\n  font-size: 1.5rem;\n}\n\n.board#ai:hover {\n  cursor: pointer;\n}\n\n.board {\n  border: 3px solid black;\n  width: 500px;\n  height: 500px;\n  background-color: white;\n  display: flex;\n  flex-direction: column;\n}\n\n.col.invalid {\n  background-color: lightcoral !important;\n}\n\n.col.valid {\n  background-color: lightgreen;\n}\n\n.col.placed-ship {\n  background-color: grey;\n}\n\n.row {\n  flex-grow: 1;\n  display: flex;\n}\n\n.col {\n  border: 1px solid black;\n  flex-grow: 1;\n}\n\n.ship {\n  background-color: grey;\n}\n\n.hit {\n  background-color: red;\n}\n\n.miss {\n  background-color: lightskyblue;\n}\n",""]);const i=o},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,a,s){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var i=0;i<this.length;i++){var l=this[i][0];null!=l&&(o[l]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);r&&o[d[0]]||(void 0!==s&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=s),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),a&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=a):d[4]="".concat(a)),t.push(d))}},t}},601:e=>{e.exports=function(e){return e[1]}},72:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var s={},o=[],i=0;i<e.length;i++){var l=e[i],c=r.base?l[0]+r.base:l[0],d=s[c]||0,p="".concat(c," ").concat(d);s[c]=d+1;var h=n(p),u={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(u);else{var m=a(u,r);r.byIndex=i,t.splice(i,0,{identifier:p,updater:m,references:1})}o.push(p)}return o}function a(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,a){var s=r(e=e||[],a=a||{});return function(e){e=e||[];for(var o=0;o<s.length;o++){var i=n(s[o]);t[i].references--}for(var l=r(e,a),c=0;c<s.length;c++){var d=n(s[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}s=l}}},659:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,a&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var s=t[r]={id:r,exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0,(()=>{var e=n(72),t=n.n(e),r=n(825),a=n.n(r),s=n(659),o=n.n(s),i=n(56),l=n.n(i),c=n(540),d=n.n(c),p=n(113),h=n.n(p),u=n(790),m={};m.styleTagTransform=h(),m.setAttributes=l(),m.insert=o().bind(null,"head"),m.domAPI=a(),m.insertStyleElement=d(),t()(u.A,m),u.A&&u.A.locals&&u.A.locals;var v=n(16),g={};g.styleTagTransform=h(),g.setAttributes=l(),g.insert=o().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=d(),t()(v.A,g),v.A&&v.A.locals&&v.A.locals;const f=class{constructor(e){this.length=e,this.totalHits=0,this.sunk=!1}hit(){this.sunk||(this.totalHits+=1)}isSunk(){return this.totalHits>=this.length&&(this.sunk=!0),this.sunk}},b=class{constructor(){this.board=this.#e(),this.misses=[],this.hits=[],this.ships=[]}#e(){const e=[];for(let t=0;t<10;t++){const t=[];for(let e=0;e<10;e++)t.push(0);e.push(t)}return e}isValidPlacement(e,t,n){let[r,a]=n;const s=[];if(r<0||r>9||a<0||a>9)return!1;if("horizontal"===t){if(e+a>10)return!1;for(let t=0;t<e;t++)s.push([r,a+t])}else if("vertical"===t){if(e+r>10)return!1;for(let t=0;t<e;t++)s.push([r+t,a])}return s.every((e=>{let[t,n]=e;return 0===this.board[t][n]}))}placeShip(e,t,n){let[r,a]=n;if(this.isValidPlacement(e,t,[r,a])){const n=new f(e),s={ship:n,pos:[]};if("horizontal"===t)for(let t=0;t<e;t++)this.board[r][a+t]=n,s.pos.push([r,a+t]);else if("vertical"===t)for(let t=0;t<e;t++)this.board[r+t][a]=n,s.pos.push([r+t,a]);this.ships.push(s)}}#t(e){let[t,n]=e;return!(t<0||t>9||n<0||n>9)}receiveAttack(e){let[t,n]=e;if(this.#t([t,n])){const e=this.board[t][n];e?(e.hit(),e.isSunk(),this.hits.push([t,n])):this.misses.push([t,n])}}allShipsSunk(){return this.ships.every((e=>!0===e.ship.sunk))}},y=class{constructor(){this.gameboard=new b}reset(){this.gameboard=new b}},x={setupGameDOM(){const e=document.querySelector("#board-container");e.textContent="",document.querySelector("#winner-display").style.visibility="hidden";const t=document.createElement("div");t.id="player",t.classList.add("board"),e.appendChild(t),this.renderBoard("player");const n=document.createElement("div");n.id="orientation";const r=document.createElement("button");r.textContent="Horizontal",r.classList.add("ori-btn"),r.classList.add("active"),r.id="horizontal",n.appendChild(r);const a=document.createElement("button");a.textContent="Vertical",a.classList.add("ori-btn"),a.id="vertical",n.appendChild(a);const s=document.createElement("div");s.id="ships-container",e.appendChild(s),s.appendChild(n);const o=document.createElement("div");o.id="ships-div",s.appendChild(o),this.renderSetupShips()},renderBoard(e){const t=document.querySelector(`#${e}`);for(let e=0;e<10;e++){const n=document.createElement("div");n.classList.add("row");for(let t=0;t<10;t++){const r=document.createElement("div");r.classList.add("col"),r.dataset.pos=`${e}-${t}`,n.appendChild(r)}t.appendChild(n)}},renderPlayerShips(e){const t=e.gameboard.ships;for(let e=0;e<t.length;e++){const n=t[e].pos;for(let e=0;e<n.length;e++)document.querySelector(`#player [data-pos="${n[e][0]}-${n[e][1]}"]`).classList.add("ship")}},renderSetupShips(){const e=document.querySelector("#ships-div"),t=this.createShip("carrier",5),n=this.createShip("battleship",4),r=this.createShip("destroyer",3),a=this.createShip("destroyer-two",3),s=this.createShip("submarine",2),o=this.createShip("submarine-two",2);e.appendChild(t),e.appendChild(n),e.appendChild(r),e.appendChild(a),e.appendChild(s),e.appendChild(o)},createShip(e,t){const n=document.createElement("div");n.classList.add("setup-ship"),n.id=e,n.draggable=!0,n.dataset.length=t;for(let e=0;e<t;e++){const e=document.createElement("div");e.classList.add("cell"),n.appendChild(e)}return n},swapOrientation(e,t){const n=document.querySelectorAll("#orientation button"),r=document.querySelector("#ships-div"),a=document.querySelectorAll("#ships-div .setup-ship");n.forEach((e=>{e.classList.remove("active")})),e.classList.add("active"),"horizontal"===t?(r.classList.remove("vertical"),a.forEach((e=>e.classList.remove("vertical")))):(r.classList.add("vertical"),a.forEach((e=>e.classList.add("vertical"))))},createStartButton(){const e=document.createElement("button"),t=document.querySelector("#ships-container");t.textContent="",e.textContent="Start Game",e.id="start-btn",t.appendChild(e)},startGameDOM(){const e=document.querySelector("#board-container");document.querySelector("#ships-container").remove();const t=document.createElement("div");t.id="ai",t.classList.add("board"),e.appendChild(t),this.renderBoard("ai")},updateBoard(e,t){this.renderHits(e,t),this.renderMisses(e,t)},renderHits(e,t){const n=e.gameboard.hits;if(n.length){const e=n[n.length-1],r=document.querySelector(`#${t} [data-pos="${e[0]}-${e[1]}"]`);r.classList.add("hit"),r.classList.remove("placed-ship")}},renderMisses(e,t){const n=e.gameboard.misses;if(n.length){const e=n[n.length-1];document.querySelector(`#${t} [data-pos="${e[0]}-${e[1]}"]`).classList.add("miss")}},displayWinner(e){const t=document.querySelector("#winner-display");document.querySelector("#winner-display h2").textContent=`${e} wins!`,t.style.visibility="visible"}},S=x,k=new y,L=new class extends y{constructor(){super(),this.validMoves=this.#n(),this.lastKnownHit=[],this.smarterMoves=[]}#n(){const e=[];for(let t=0;t<10;t++)for(let n=0;n<10;n++)e.push([t,n]);return e}#r(e,t,n,r){if(n>r)return-1;let a=Math.floor((n+r)/2);return e[a][0]===t[0]&&e[a][1]===t[1]?a:e[a]>t?this.#r(e,t,n,a-1):this.#r(e,t,a+1,r)}#a(e,t,n){const r=[];t.length&&r.push(...t),n.length&&r.push(...n),r.forEach((t=>{const n=this.#r(e,t,0,e.length-1);n>=0&&e.splice(n,1)}));const a=Math.floor(Math.random()*e.length);return e[a]}smarterAttack(e,t,n){if(!t.length)return this.#a(e,t,n);const r=t[t.length-1];if(!this.lastKnownHit.length||this.lastKnownHit[0]!==r[0]||this.lastKnownHit[1]!==r[1]){const e=[];e.push([r[0]+1,r[1]]),e.push([r[0]-1,r[1]]),e.push([r[0],r[1]+1]),e.push([r[0],r[1]-1]);const a=e.filter((e=>{if(e[0]>=0&&e[0]<=9&&e[1]>=0&&e[1]<=9)return!0})),s=[];t.length&&s.push(...t),n.length&&s.push(...n),this.smarterMoves.push(...a);e:for(let e=0;e<this.smarterMoves.length;e++)for(let t=0;t<s.length;t++)if(this.smarterMoves[e][0]===s[t][0]&&this.smarterMoves[e][1]===s[t][1]){this.smarterMoves.splice(e,1),e--;continue e}this.lastKnownHit[0]=r[0],this.lastKnownHit[1]=r[1]}return this.smarterMoves.length?this.smarterMoves.pop():this.#a(e,t,n)}reset(){super.reset(),this.validMoves=this.#n(),this.smarterMoves=[],this.lastKnownHit=[]}};let w="horizontal",E=null,A=!1;const q=[],M=[],C={setupGame(){S.setupGameDOM(),document.querySelector("#orientation").addEventListener("click",this.swapOrientation);const e=document.querySelectorAll(".setup-ship"),t=document.querySelector("#player");e.forEach((e=>{e.addEventListener("dragstart",this.drag)})),t.addEventListener("dragover",this.dragOver),t.addEventListener("dragenter",this.dragEnter),t.addEventListener("dragleave",this.dragLeave),t.addEventListener("drop",this.drop),C.placeRandomAIShips()},swapOrientation(e){e.target.classList.contains("ori-btn")&&(w=e.target.id,S.swapOrientation(e.target,w))},drag(e){E=+e.target.dataset.length,e.dataTransfer.setData("text/ship/id",`${e.target.id}`),e.dataTransfer.setDragImage(e.target,25,25)},dragOver(e){e.preventDefault()},dragEnter(e){if(e.preventDefault(),e.target.dataset.pos||(A=!1),e.target.dataset.pos){q.length&&(q.forEach((e=>{const t=document.querySelector(`#player [data-pos="${e[0]}-${e[1]}"]`);t.classList.remove("valid"),t.classList.remove("invalid")})),q.length=0);const t=e.target.dataset.pos.split("-")[0],n=e.target.dataset.pos.split("-")[1];M.push(...C.getPotentialPos([+t,+n],E,w)),k.gameboard.isValidPlacement(E,w,[+t,+n])?M.forEach((e=>{document.querySelector(`#player [data-pos="${e[0]}-${e[1]}"]`).classList.add("valid")})):M.forEach((e=>{document.querySelector(`#player [data-pos="${e[0]}-${e[1]}"]`).classList.add("invalid")})),q.push(...M),M.length=0}},dragLeave(e){e.preventDefault(),!e.target.dataset.pos&&A&&q.length&&(q.forEach((e=>{const t=document.querySelector(`#player [data-pos="${e[0]}-${e[1]}"]`);t.classList.remove("valid"),t.classList.remove("invalid")})),q.length=0),e.target.dataset&&(A=!0)},drop(e){if(e.preventDefault(),q.length){const t=q[0];if(k.gameboard.isValidPlacement(E,w,[t[0],t[1]])){q.forEach((e=>{const t=document.querySelector(`#player [data-pos="${e[0]}-${e[1]}"]`);t.classList.remove("valid"),t.classList.remove("invalid"),t.classList.add("placed-ship")})),k.gameboard.placeShip(E,w,[t[0],t[1]]);const n=e.dataTransfer.getData("text/ship/id");document.querySelector(`#${n}`).remove(),6===k.gameboard.ships.length&&(S.createStartButton(),C.addStartListener())}else q.forEach((e=>{const t=document.querySelector(`#player [data-pos="${e[0]}-${e[1]}"]`);t.classList.remove("valid"),t.classList.remove("invalid")}));q.length=0}},getPotentialPos(e,t,n){const r=[],a=e[0],s=e[1];if("horizontal"===n)for(let e=0;e<t;e++)s+e<=9&&s+e>=0&&r.push([a,s+e]);else for(let e=0;e<t;e++)a+e<=9&&a+e>=0&&r.push([a+e,s]);return r},addStartListener(){const e=document.querySelector("#start-btn");e.removeEventListener("click",C.startGame),e.addEventListener("click",C.startGame)},removeListeners(){const e=document.querySelector("#player");e.removeEventListener("dragover",this.dragOver),e.removeEventListener("dragenter",this.dragEnter),e.removeEventListener("dragleave",this.dragLeave),e.removeEventListener("drop",this.drop)},placeRandomAIShips(){const e=["horizontal","vertical"],t=[2,2,3,3,4,5];for(;L.gameboard.ships.length<6;){const n=L.gameboard.ships.length,r=Math.floor(10*Math.random()),a=Math.floor(10*Math.random()),s=e[Math.floor(2*Math.random())];L.gameboard.placeShip(t[t.length-1],s,[r,a]),n<L.gameboard.ships.length&&t.pop()}},startGame(){S.startGameDOM(),C.removeListeners();const e=document.querySelector("#ai");e.removeEventListener("click",C.sendPlayerAttack),e.addEventListener("click",C.sendPlayerAttack)},sendPlayerAttack(e){if(!e.target.dataset.pos||e.target.classList.contains("selected"))return;e.target.classList.add("selected");const t=e.target.dataset.pos;let[n,r]=t.split("-");n=+n,r=+r,L.gameboard.receiveAttack([n,r]),S.updateBoard(L,"ai"),C.isGameOver()?C.endGame("Player"):C.sendAIAttack()},sendAIAttack(){const e=document.querySelector("#ai");e.removeEventListener("click",C.sendPlayerAttack),setTimeout((()=>{const t=L.smarterAttack(L.validMoves,k.gameboard.hits,k.gameboard.misses);k.gameboard.receiveAttack(t),S.updateBoard(k,"player"),e.addEventListener("click",C.sendPlayerAttack),C.isGameOver()&&C.endGame("AI")}),500)},isGameOver(){const e=k.gameboard.allShipsSunk();return L.gameboard.allShipsSunk()||e},endGame(e){document.querySelector("#ai").removeEventListener("click",C.sendPlayerAttack),S.displayWinner(e),document.querySelector("#new-game-btn").addEventListener("click",C.newGame)},newGame(){k.reset(),L.reset(),document.querySelector("#new-game-btn").removeEventListener("click",C.newGame),C.setupGame()}};C.setupGame()})()})();